const FriendsJS={requestAPI:(e,t,n)=>{let r=5;!function a(){return new Promise(((o,s)=>{let i=0,l=setTimeout((()=>{0===i&&(i=2,l=null,s("请求超时"),0==r&&n())}),5e3);fetch(e).then((function(e){if(2!==i&&(clearTimeout(l),o(e),l=null,i=1),e.ok)return e.json();throw new Error("Network response was not ok.")})).then((function(e){r=0,t(e)})).catch((function(e){r>0?(r-=1,setTimeout((()=>{a()}),5e3)):n()}))}))}()},layout:e=>{const t=$(e.el)[0];FriendsJS.requestAPI(e.api,(function(n){$(t).find(".loading-wrap").remove();n.content.forEach(((n,r)=>{var a='<div class="user-card">';a+='<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer"',a+=' href="'+n.url+'">',a+='<img src="'+(n.avatar||e.avatar)+'" onerror="javascript:this.src=\''+e.avatar+"';\">",a+='<div class="name"><span>'+n.title+"</span></div>",a+="</a>",a+="</div>",$(t).find(".group-body").append(a)}))}),(function(){$(t).find(".loading-wrap svg").remove(),$(t).find(".loading-wrap p").text("加载失败，请稍后重试。")}))},start:()=>{const e=document.getElementsByClassName("friendsjs-wrap");for(var t=0;t<e.length;t++){const r=e[t],a=r.getAttribute("api");if(null!=a){var n=new Object;n.el=r,n.api=a,n.class=r.getAttribute("class"),n.avatar="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/avatar/round/3442075.svg",FriendsJS.layout(n)}}}};$((function(){FriendsJS.start()})),document.addEventListener("pjax:complete",(function(){FriendsJS.start()}));